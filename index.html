<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>توجيه تلقائي للمواقع الثلاثة</title>
<style>
  html, body { margin:0; padding:0; height:100%; display:flex; align-items:center; justify-content:center; font-family: system-ui, Arial; background:#f9f9f9; }
  #message { text-align:center; padding:20px; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1); max-width:400px; }
  .big { font-weight:600; font-size:1.2rem; margin-bottom:8px; }
  .muted { color:#555; font-size:0.95rem; }
</style>
</head>
<body>
<div id="message">
  <div class="big">جارٍ تحديد الموقع التالي…</div>
  <div class="muted" id="which">انتظر ثانيتين وسيتم التحويل تلقائيًا</div>
</div>

<script>
(function(){

  // قائمة ملفات المواقع الثلاثة
  const sites = ['index1.html','index2.html','index3.html'];
  const storageKey = 'lastSiteIndex_v2';

  // الحصول على آخر موقع (sessionStorage يستخدم هنا لإعادة التعيين بعد الخروج/إغلاق المتصفح)
  let last = sessionStorage.getItem(storageKey);
  last = last === null ? -1 : parseInt(last,10);
  if(isNaN(last)) last = -1;

  // التالي في الترتيب الدوري
  let next = (last + 1) % sites.length;

  // حفظ التالي في sessionStorage (سيختفي عند إغلاق المتصفح)
  sessionStorage.setItem(storageKey, next);

  // عرض اسم الموقع للمستخدم
  document.getElementById('which').textContent = 'يُفتح: ' + sites[next];

  // تحويل بعد فترة قصيرة للسماح برؤية الرسالة
  setTimeout(() => {
    window.location.replace(sites[next]);
  }, 700);

  // حدث قبل إغلاق الصفحة/الخروج
  window.addEventListener('beforeunload', function(e){
    // رسالة وداع قصيرة (قد تظهر أو لا حسب المتصفح)
    e.preventDefault();
    e.returnValue = '';
    // مسح كل شيء من sessionStorage
    sessionStorage.clear();
  });

})();
</script>
</body>
</html>
